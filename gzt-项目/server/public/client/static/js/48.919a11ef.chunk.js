(window.webpackJsonp=window.webpackJsonp||[]).push([[48],{1013:function(e,a,t){"use strict";t.r(a);t(461);var n=t(462),r=(t(547),t(546)),s=(t(459),t(460)),c=(t(120),t(27)),o=(t(456),t(458)),l=(t(233),t(13)),u=(t(58),t(12)),i=t(2),p=t.n(i),f=t(57),m=t(153),d=(t(474),t(477)),g=(t(237),t(157)),v=t(0),b=t.n(v),E=t(30),y=t(3),h=t(51),I=(t(891),g.a.Content),j=d.a.Item;a.default=d.a.create()(Object(h.c)(function(e){return{userInfo:e.UserInfo.userInfo}},function(e){return{queryUserInfo:function(){e({type:"".concat("UserInfo","/queryUserInfo")})},updateUserInfo:function(a,t){e({type:"".concat("UserInfo","/updateUserInfo"),payload:{body:a,cb:t}})}}})(function(e){var a=Object(v.useState)(""),t=Object(m.a)(a,2),i=t[0],g=t[1],h=Object(v.useState)(!1),x=Object(m.a)(h,2),w=x[0],U=x[1];Object(v.useEffect)(function(){Object(f.a)(p.a.mark(function e(){var a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.b)("/api/u_get_getPersonalAvatar");case 2:"success"===(a=e.sent).status&&g(a.avatar.oss_path);case 4:case"end":return e.stop()}},e)}))()},[]),Object(v.useEffect)(function(){if(e.userInfo){var a=e.userInfo,t=a.name,n=a.signature;e.form.setFieldsValue({name:t,signature:n})}},[e.userInfo]);var O=e.form.getFieldDecorator,_=b.a.createElement("div",null,b.a.createElement(l.a,{type:w?"loading":"plus"}),b.a.createElement("div",{className:"ant-upload-text"},w?"\u4e0a\u4f20\u4e2d":"\u4e0a\u4f20\u5934\u50cf"));return b.a.createElement(I,{className:"settings-con"},b.a.createElement("h2",{style:{padding:"5px 0",lineHeight:"40px",fontSize:"18px",borderBottom:"1px solid #e1e4e8"}},"\u57fa\u672c\u8d44\u6599"),b.a.createElement(n.a,null,b.a.createElement(s.a,{span:16},b.a.createElement(d.a,{onSubmit:function(a){a.preventDefault(),e.form.validateFieldsAndScroll(function(a,t){a||e.updateUserInfo(t,function(){u.a.success("\u66f4\u65b0\u6210\u529f")})})},hideRequiredMark:!0,layout:"vertical",style:{marginTop:"10px",width:"360px"}},b.a.createElement(j,{label:"\u6635\u79f0"},O("name",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6635\u79f0!"}]})(b.a.createElement(o.a,null))),b.a.createElement(j,{label:"\u4e2a\u6027\u7b7e\u540d"},O("signature")(b.a.createElement(o.a.TextArea,{placeholder:"\u5411\u522b\u4eba\u5c55\u793a\u4e00\u4e0b\u81ea\u5df1"}))),b.a.createElement(j,null,b.a.createElement(c.a,{type:"primary",htmlType:"submit",style:{marginRight:"20px"}},"\u66f4\u65b0\u4e2a\u4eba\u4fe1\u606f")))),b.a.createElement(s.a,{span:8},b.a.createElement(j,{colon:!1,label:"\u5934\u50cf"},b.a.createElement(r.a,{name:"avatar",listType:"picture-card",className:"avatar-uploader",beforeUpload:function(e){var a=["image/png","image/jpeg"].includes(e.type);a||u.a.error("\u53ea\u652f\u6301jpg\u548cpng\u683c\u5f0f\u7684\u5934\u50cf!");var t=e.size/1024/1024<2;return t||u.a.error("\u6700\u5927\u652f\u63012M\u56fe\u7247!"),a&&t},onChange:function(e){var a=e.file;e.fileList,e.event,"uploading"!==a.status?"done"===a.status&&(U(!1),g(a.response.avatar.avatar.oss_path)):U(!0)},action:"/api/u_get_editPersonalAvatar",showUploadList:!1,headers:{authorization:E.a}},w?_:i?b.a.createElement("img",{src:i,alt:"avatar"}):_)))))}))},891:function(e,a,t){}}]);
//# sourceMappingURL=48.919a11ef.chunk.js.map