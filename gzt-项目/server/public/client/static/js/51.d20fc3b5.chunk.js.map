{"version":3,"sources":["pages/work/approval/MyApprovalSider.tsx"],"names":["Sider","MyApproval","connect","state","permission","props","_getPrototypeOf2","_this","Object","_Users_litong_laravel_gzt_client_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_4__","this","_len","arguments","length","args","Array","_key","_Users_litong_laravel_gzt_client_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_6__","_Users_litong_laravel_gzt_client_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7__","call","apply","concat","url","window","location","pathname","split","leavePage","leaveState","cacheLifecycles","didCache","componentDidCache","bind","_Users_litong_laravel_gzt_client_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_8__","didRecover","componentDidRecover","setState","history","replace","prevProps","PERMISSION_APPROVAL_MANAGEMENT","includes","react__WEBPACK_IMPORTED_MODULE_12__","antd_es_layout__WEBPACK_IMPORTED_MODULE_11__","id","style","height","width","className","background","overflowY","overflowX","borderRight","display","react_router_dom__WEBPACK_IMPORTED_MODULE_13__","to","antd_es_menu__WEBPACK_IMPORTED_MODULE_1__","mode","selectedKeys","border","Item","key","antd_es_icon__WEBPACK_IMPORTED_MODULE_3__","type","children","React"],"mappings":"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","file":"static/js/51.d20fc3b5.chunk.js","sourcesContent":["import * as React from 'react';\nimport { Layout, Menu, Icon } from 'antd';\nimport { Link } from 'react-router-dom';\nimport './approval.scss';\nimport { connect } from 'dva';\nconst { Sider } = Layout;\n\nconst USERINFO = 'UserInfo';\n\nconst mapStateToProps = (state: any) => {\n  return {\n    permission: state[USERINFO].permission,\n  }\n};\n@connect(mapStateToProps)\nexport default class MyApproval extends React.Component<any, any> {\n  state = {\n    /** 根据当前页面url设置左侧导航默认选中状态 */\n    url: window.location.pathname.split('/')[3],\n    leavePage: this.props.location.pathname,\n    leaveState: this.props.location.state\n  }\n\n  constructor(props: any, ...args: any) {\n    super(props, ...args);\n    props.cacheLifecycles.didCache(this.componentDidCache.bind(this));\n    props.cacheLifecycles.didRecover(this.componentDidRecover.bind(this));\n  }\n  // 保存上次离开时的页面 和 状态\n  componentDidCache() {\n    this.setState({\n      leavePage: this.props.location.pathname,\n      leaveState: this.props.location.state\n    })\n  }\n  // 恢复上次离开时的页面 和 状态\n  componentDidRecover() {\n    this.props.history.replace({\n      pathname: this.state.leavePage,\n      state: this.state.leaveState\n    });\n  }\n  componentDidUpdate(prevProps: any) {\n    // 更新左侧导航激活状态\n    if (prevProps.location.pathname !== this.props.location.pathname) {\n      this.setState({\n        url: this.props.location.pathname.split('/')[3]\n      })\n    }\n  }\n  render() {\n\n    const { permission } = this.props;\n    /** 审批管理权 */\n    const PERMISSION_APPROVAL_MANAGEMENT = permission && permission.includes('c_approval_manage_per');\n\n    return (\n      <Layout id=\"work-approval\" style={{ height: 'calc(100vh - 97px)' }}>\n        <Sider width=\"210\" className=\"box\" style={{ background: '#fff', overflowY: 'auto', overflowX: 'hidden', borderRight: '1px solid #e8e8e8', display: (this.props.location.pathname === '/work/approval/template' || this.props.location.pathname === '/work/approval/newCreate') ? 'none' : 'block' }}>\n          <div className=\"text-center\">\n            <Link to='/work/approval/create' className=\"creatApproval\">新建审批</Link>\n          </div>\n          <Menu\n            mode=\"inline\"\n            selectedKeys={[this.state.url]}\n            style={{ border: 'none' }}\n          >\n            <Menu.Item key=\"pending\" className=\"\">\n              <Link to=\"/work/approval/pending\">\n                <Icon type=\"folder-open\" />\n                <span>待我审批</span>\n              </Link>\n            </Menu.Item>\n            <Menu.Item key=\"approved\" className=\"\">\n              <Link to=\"/work/approval/approved\">\n                <Icon type=\"folder-open\" />\n                <span>我已审批</span>\n              </Link>\n            </Menu.Item>\n            <Menu.Item key=\"initiate\" className=\"\">\n              <Link to='/work/approval/initiate'>\n                <Icon type=\"folder-open\" />\n                <span>我发起的</span>\n              </Link>\n            </Menu.Item>\n            <Menu.Item key=\"ccApproval\" className=\"\">\n              <Link to='/work/approval/ccApproval'>\n                <Icon type=\"folder-open\" />\n                <span>抄送给我的</span>\n              </Link>\n            </Menu.Item>\n            <Menu.Item key=\"archive\" className=\"\">\n              <Link to='/work/approval/archive'>\n                <Icon type=\"folder-open\" />\n                <span>已归档</span>\n              </Link>\n            </Menu.Item>\n            {\n              PERMISSION_APPROVAL_MANAGEMENT ? (\n                <Menu.Item key=\"management\" className=\"\">\n                  <Link to='/work/approval/management' >\n                    <Icon type=\"setting\" />\n                    <span>审批管理</span>\n                  </Link>\n                </Menu.Item>\n              ) : null\n            }\n          </Menu>\n        </Sider>\n        {this.props.children}\n      </Layout>\n    )\n  }\n}"],"sourceRoot":""}