{"version":3,"sources":["pages/work/review/ReviewSider.tsx"],"names":["Sider","SubMenu","antd_es_menu__WEBPACK_IMPORTED_MODULE_9__","ReviewSider","connect","state","permission","props","_getPrototypeOf2","_this","Object","_Users_litong_laravel_gzt_client_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__","this","_len","arguments","length","args","Array","_key","_Users_litong_laravel_gzt_client_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__","_Users_litong_laravel_gzt_client_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__","call","apply","concat","currentUrl","location","pathname","split","leavePage","leaveState","handleSiderSelect","_ref","key","setState","cacheLifecycles","didCache","componentDidCache","bind","_Users_litong_laravel_gzt_client_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_6__","didRecover","componentDidRecover","history","replace","prevProps","prevState","display","test","PERMISSION_REVIEW_MANAGEMENT","includes","react__WEBPACK_IMPORTED_MODULE_12__","antd_es_layout__WEBPACK_IMPORTED_MODULE_11__","className","width","style","mode","selectedKeys","defaultOpenKeys","borderRightColor","theme","onSelect","Item","react_router_dom__WEBPACK_IMPORTED_MODULE_13__","to","antd_es_icon__WEBPACK_IMPORTED_MODULE_1__","type","title","children","React"],"mappings":"uSAOQA,YACFC,EAAUC,EAAA,EAAKD,QASAE,EADpBC,YALuB,SAACC,GACvB,MAAO,CACLC,WAAYD,EAAK,SAAWC,4BAY9B,SAAAH,EAAYI,GAA0B,IAAAC,EAAAC,EAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAT,GAAA,QAAAU,EAAAC,UAAAC,OAAXC,EAAW,IAAAC,MAAAJ,EAAA,EAAAA,EAAA,KAAAK,EAAA,EAAAA,EAAAL,EAAAK,IAAXF,EAAWE,EAAA,GAAAJ,UAAAI,GAAA,OACpCT,EAAAC,OAAAS,EAAA,EAAAT,CAAAE,MAAAJ,EAAAE,OAAAU,EAAA,EAAAV,CAAAP,IAAAkB,KAAAC,MAAAd,EAAA,CAAAI,KAAML,GAANgB,OAAgBP,MAPlBX,MAAQ,CACNmB,WAAYf,EAAKF,MAAMkB,SAASC,SAASC,MAAM,KAAK,IAAM,YAC1DC,UAAWnB,EAAKF,MAAMkB,SAASC,SAC/BG,WAAYpB,EAAKF,MAAMkB,SAASpB,OAGII,EAoCtCqB,kBAAoB,SAAAC,GAA0B,IAAvBC,EAAuBD,EAAvBC,IACrBvB,EAAKwB,SAAS,CACZT,WAAYQ,KApCdzB,EAAM2B,gBAAgBC,SAAS1B,EAAK2B,kBAAkBC,KAAvB3B,OAAA4B,EAAA,EAAA5B,CAAAD,KAC/BF,EAAM2B,gBAAgBK,WAAW9B,EAAK+B,oBAAoBH,KAAzB3B,OAAA4B,EAAA,EAAA5B,CAAAD,KAHGA,mFAOC,iBAAjCG,KAAKL,MAAMkB,SAASC,UACtBd,KAAKL,MAAMkC,QAAQC,QAAQ,qEAIZC,EAAgBC,GAC7BA,EAAUpB,aAAeZ,KAAKL,MAAMkB,SAASC,SAASC,MAAM,KAAK,IACnEf,KAAKqB,SAAS,CACZT,WAAYZ,KAAKL,MAAMkB,SAASC,SAASC,MAAM,KAAK,iDAOxDf,KAAKqB,SAAS,CACZL,UAAWhB,KAAKL,MAAMkB,SAASC,SAC/BG,WAAYjB,KAAKL,MAAMkB,SAASpB,sDAMlCO,KAAKL,MAAMkC,QAAQC,QAAQ,CACzBhB,SAAUd,KAAKP,MAAMuB,UACrBvB,MAAOO,KAAKP,MAAMwB,8CAUb,IAECL,EAAeZ,KAAKP,MAApBmB,WACAlB,EAAeM,KAAKL,MAApBD,WACFuC,EAA2C,0BAAjCjC,KAAKL,MAAMkB,SAASC,UACD,gCAAjCd,KAAKL,MAAMkB,SAASC,UACa,+BAAjCd,KAAKL,MAAMkB,SAASC,UACa,8BAAjCd,KAAKL,MAAMkB,SAASC,UACpB,+BAA+BoB,KAAKlC,KAAKL,MAAMkB,SAASC,UACtD,OAAS,QAGPqB,EAA+BzC,GAAcA,EAAW0C,SAAS,oBAEvE,OACEC,EAAA,cAAAC,EAAA,GAAQC,UAAU,eAChBF,EAAA,cAACjD,EAAD,CAAOoD,MAAM,MAAMD,UAAU,eAAeE,MAAO,CAAER,YACnDI,EAAA,cAAA/C,EAAA,GACEoD,KAAK,SACLC,aAAc,CAAC/B,GACfgC,gBAAiB,CAAC,cAAe,aAAc,YAAa,YAAa,gBAAiB,aAAaR,SAASxB,GAAc,CAAC,aAAe,GAC9I6B,MAAO,CAAEI,iBAAkB,eAC3BC,MAAM,QACNC,SAAU/C,KAAKkB,mBAEfmB,EAAA,cAAA/C,EAAA,EAAM0D,KAAN,CAAW5B,IAAI,aACbiB,EAAA,cAACY,EAAA,EAAD,CAAMC,GAAG,0BACPb,EAAA,cAAAc,EAAA,GAAMC,KAAK,SACXf,EAAA,sBAAME,UAAU,YAAhB,8BAGJF,EAAA,cAAA/C,EAAA,EAAM0D,KAAN,CAAW5B,IAAI,OACbiB,EAAA,cAACY,EAAA,EAAD,CAAMC,GAAG,oBACPb,EAAA,cAAAc,EAAA,GAAMC,KAAK,SACXf,EAAA,sBAAME,UAAU,YAAhB,8BAGJF,EAAA,cAAA/C,EAAA,EAAM0D,KAAN,CAAW5B,IAAI,aACbiB,EAAA,cAACY,EAAA,EAAD,CAAMC,GAAG,0BACPb,EAAA,cAAAc,EAAA,GAAMC,KAAK,cACXf,EAAA,sBAAME,UAAU,YAAhB,8BAGJF,EAAA,cAAA/C,EAAA,EAAM0D,KAAN,CAAW5B,IAAI,kBACbiB,EAAA,cAACY,EAAA,EAAD,CAAMC,GAAG,+BACPb,EAAA,cAAAc,EAAA,GAAMC,KAAK,cACXf,EAAA,sBAAME,UAAU,YAAhB,8BAGJF,EAAA,cAAA/C,EAAA,EAAM0D,KAAN,CAAW5B,IAAI,iBACbiB,EAAA,cAACY,EAAA,EAAD,CAAMC,GAAG,8BACPb,EAAA,cAAAc,EAAA,GAAMC,KAAK,SACXf,EAAA,sBAAME,UAAU,YAAhB,8BAGJF,EAAA,cAAA/C,EAAA,EAAM0D,KAAN,CAAW5B,IAAI,mBACbiB,EAAA,cAACY,EAAA,EAAD,CAAMC,GAAG,gCACPb,EAAA,cAAAc,EAAA,GAAMC,KAAK,UACXf,EAAA,sBAAME,UAAU,YAAhB,8BAGJF,EAAA,cAAA/C,EAAA,EAAM0D,KAAN,CAAW5B,IAAI,YACbiB,EAAA,cAACY,EAAA,EAAD,CAAMC,GAAG,yBACPb,EAAA,cAAAc,EAAA,GAAMC,KAAK,WACXf,EAAA,sBAAME,UAAU,YAAhB,oCAGJF,EAAA,cAAA/C,EAAA,EAAM0D,KAAN,CAAW5B,IAAI,YACbiB,EAAA,cAACY,EAAA,EAAD,CAAMC,GAAG,yBACPb,EAAA,cAAAc,EAAA,GAAMC,KAAK,SACXf,EAAA,sBAAME,UAAU,YAAhB,wBAGJF,EAAA,cAAA/C,EAAA,EAAM0D,KAAN,CAAW5B,IAAI,WACbiB,EAAA,cAACY,EAAA,EAAD,CAAMC,GAAG,wBACPb,EAAA,cAAAc,EAAA,GAAMC,KAAK,SACXf,EAAA,sBAAME,UAAU,YAAhB,wBAUJF,EAAA,cAAA/C,EAAA,EAAM0D,KAAN,CAAW5B,IAAI,gBACbiB,EAAA,cAACY,EAAA,EAAD,CAAMC,GAAG,6BACPb,EAAA,cAAAc,EAAA,GAAMC,KAAK,cACXf,EAAA,sBAAME,UAAU,YAAhB,8BAIFJ,EACEE,EAAA,cAAChD,EAAD,CACE+B,IAAI,YACJiC,MACEhB,EAAA,0BACEA,EAAA,cAAAc,EAAA,GAAMC,KAAK,YACXf,EAAA,sBAAME,UAAU,YAAhB,8BAIJF,EAAA,cAAA/C,EAAA,EAAM0D,KAAN,CAAW5B,IAAI,eACbiB,EAAA,cAACY,EAAA,EAAD,CAAMC,GAAG,4BACPb,EAAA,cAAAc,EAAA,GAAMC,KAAK,SACXf,EAAA,sBAAME,UAAU,YAAhB,8BAGJF,EAAA,cAAA/C,EAAA,EAAM0D,KAAN,CAAW5B,IAAI,cACbiB,EAAA,cAACY,EAAA,EAAD,CAAMC,GAAG,2BACPb,EAAA,cAAAc,EAAA,GAAMC,KAAK,YACXf,EAAA,sBAAME,UAAU,YAAhB,8BAGJF,EAAA,cAAA/C,EAAA,EAAM0D,KAAN,CAAW5B,IAAI,aACbiB,EAAA,cAACY,EAAA,EAAD,CAAMC,GAAG,0BACPb,EAAA,cAAAc,EAAA,GAAMC,KAAK,WACXf,EAAA,sBAAME,UAAU,YAAhB,8BASJF,EAAA,cAAA/C,EAAA,EAAM0D,KAAN,CAAW5B,IAAI,iBACbiB,EAAA,cAACY,EAAA,EAAD,CAAMC,GAAG,8BACPb,EAAA,cAAAc,EAAA,GAAMC,KAAK,UACXf,EAAA,sBAAME,UAAU,YAAhB,8BAGJF,EAAA,cAAA/C,EAAA,EAAM0D,KAAN,CAAW5B,IAAI,aACbiB,EAAA,cAACY,EAAA,EAAD,CAAMC,GAAG,0BACPb,EAAA,cAAAc,EAAA,GAAMC,KAAK,UACXf,EAAA,sBAAME,UAAU,YAAhB,+BAIJ,OAITvC,KAAKL,MAAM2D,iBAlMqBC","file":"static/js/53.dd142a9f.chunk.js","sourcesContent":["import * as React from 'react';\nimport { Layout, Menu, Icon } from 'antd';\nimport { Link } from 'react-router-dom';\nimport './review.scss';\nimport { SelectParam } from 'antd/lib/menu';\nimport { connect } from 'dva';\n\nconst { Sider } = Layout;\nconst SubMenu = Menu.SubMenu;\nconst USERINFO = 'UserInfo';\n\nconst mapStateToProps = (state: any) => {\n  return {\n    permission: state[USERINFO].permission,\n  }\n};\n@connect(mapStateToProps)\nexport default class ReviewSider extends React.Component<any>{\n\n  state = {\n    currentUrl: this.props.location.pathname.split('/')[3] || 'templates',\n    leavePage: this.props.location.pathname,\n    leaveState: this.props.location.state\n  }\n\n  constructor(props: any, ...args: any) {\n    super(props, ...args);\n    props.cacheLifecycles.didCache(this.componentDidCache.bind(this));\n    props.cacheLifecycles.didRecover(this.componentDidRecover.bind(this));\n  }\n\n  componentDidMount() {\n    if (this.props.location.pathname === '/work/review') {\n      this.props.history.replace('/work/review/templates');\n    }\n  }\n\n  componentDidUpdate(prevProps: any, prevState: any) {\n    if (prevState.currentUrl !== this.props.location.pathname.split('/')[3]) {\n      this.setState({\n        currentUrl: this.props.location.pathname.split('/')[3],\n      })\n    }\n  }\n\n  // 保存上次离开时的页面 和 状态\n  componentDidCache() {\n    this.setState({\n      leavePage: this.props.location.pathname,\n      leaveState: this.props.location.state\n    })\n  }\n\n  // 恢复上次离开时的页面 和 状态\n  componentDidRecover() {\n    this.props.history.replace({\n      pathname: this.state.leavePage,\n      state: this.state.leaveState\n    });\n  }\n\n  handleSiderSelect = ({ key }: SelectParam) => {\n    this.setState({\n      currentUrl: key\n    })\n  }\n\n  render() {\n\n    const { currentUrl } = this.state;\n    const { permission } = this.props;\n    const display = this.props.location.pathname === '/work/review/initiate' ||\n      this.props.location.pathname === '/work/review/createTemplate' ||\n      this.props.location.pathname === '/work/review/createProcess' ||\n      this.props.location.pathname === '/work/review/createReport' ||\n      /^\\/work\\/review\\/detail\\/\\w+/.test(this.props.location.pathname)\n      ? 'none' : 'block'\n\n    /** 评审管理权 */\n    const PERMISSION_REVIEW_MANAGEMENT = permission && permission.includes('c_pst_manage_per');\n\n    return (\n      <Layout className=\"work-review\">\n        <Sider width=\"210\" className=\"review-sider\" style={{ display }}>\n          <Menu\n            mode=\"inline\"\n            selectedKeys={[currentUrl]}\n            defaultOpenKeys={['templatemgt', 'processmgt', 'exportmgt', 'othersmgt', 'customizesmgt', 'labelsmgt'].includes(currentUrl) ? ['reviewmgt'] : []}\n            style={{ borderRightColor: 'transparent' }}\n            theme=\"light\"\n            onSelect={this.handleSiderSelect}\n          >\n            <Menu.Item key=\"templates\">\n              <Link to=\"/work/review/templates\">\n                <Icon type=\"edit\" />\n                <span className=\"nav-text\">发起项目</span>\n              </Link>\n            </Menu.Item>\n            <Menu.Item key=\"all\">\n              <Link to=\"/work/review/all\">\n                <Icon type=\"bars\" />\n                <span className=\"nav-text\">全部评审</span>\n              </Link>\n            </Menu.Item>\n            <Menu.Item key=\"reviewing\">\n              <Link to=\"/work/review/reviewing\">\n                <Icon type=\"hourglass\" />\n                <span className=\"nav-text\">评审中的</span>\n              </Link>\n            </Menu.Item>\n            <Menu.Item key=\"pendingReceive\">\n              <Link to=\"/work/review/pendingReceive\">\n                <Icon type=\"hourglass\" />\n                <span className=\"nav-text\">待接收的</span>\n              </Link>\n            </Menu.Item>\n            <Menu.Item key=\"pendingAssign\">\n              <Link to=\"/work/review/pendingAssign\">\n                <Icon type=\"sync\" />\n                <span className=\"nav-text\">待指派的</span>\n              </Link>\n            </Menu.Item>\n            <Menu.Item key=\"pendingApproval\">\n              <Link to=\"/work/review/pendingApproval\">\n                <Icon type=\"inbox\" />\n                <span className=\"nav-text\">待审核的</span>\n              </Link>\n            </Menu.Item>\n            <Menu.Item key=\"reviewed\">\n              <Link to=\"/work/review/reviewed\">\n                <Icon type=\"coffee\" />\n                <span className=\"nav-text\">评审完成的</span>\n              </Link>\n            </Menu.Item>\n            <Menu.Item key=\"archived\">\n              <Link to=\"/work/review/archived\">\n                <Icon type=\"copy\" />\n                <span className=\"nav-text\">已归档</span>\n              </Link>\n            </Menu.Item>\n            <Menu.Item key=\"cancled\">\n              <Link to=\"/work/review/cancled\">\n                <Icon type=\"copy\" />\n                <span className=\"nav-text\">已作废</span>\n              </Link>\n            </Menu.Item>\n\n            {/* <Menu.Item key=\"recyclebin\">\n              <Link to=\"/work/review/recyclebin\">\n                <Icon type=\"delete\" />\n                <span className=\"nav-text\">回收站</span>\n              </Link>\n            </Menu.Item> */}\n            <Menu.Item key=\"dataanalysis\">\n              <Link to=\"/work/review/dataanalysis\">\n                <Icon type=\"pie-chart\" />\n                <span className=\"nav-text\">数据展示</span>\n              </Link>\n            </Menu.Item>\n            {\n              PERMISSION_REVIEW_MANAGEMENT ? (\n                <SubMenu\n                  key=\"reviewmgt\"\n                  title={\n                    <span>\n                      <Icon type=\"setting\" />\n                      <span className=\"nav-text\">评审管理</span>\n                    </span>\n                  }\n                >\n                  <Menu.Item key=\"templatemgt\">\n                    <Link to=\"/work/review/templatemgt\">\n                      <Icon type=\"form\" />\n                      <span className=\"nav-text\">模板管理</span>\n                    </Link>\n                  </Menu.Item>\n                  <Menu.Item key=\"processmgt\">\n                    <Link to=\"/work/review/processmgt\">\n                      <Icon type=\"retweet\" />\n                      <span className=\"nav-text\">流程设置</span>\n                    </Link>\n                  </Menu.Item>\n                  <Menu.Item key=\"exportmgt\">\n                    <Link to=\"/work/review/exportmgt\">\n                      <Icon type=\"export\" />\n                      <span className=\"nav-text\">导出设置</span>\n                    </Link>\n                  </Menu.Item>\n                  {/* <Menu.Item key=\"othersmgt\">\n                    <Link to=\"/work/review/othersmgt\">\n                      <Icon type=\"build\" />\n                      <span className=\"nav-text\">其他设置</span>\n                    </Link>\n                  </Menu.Item> */}\n                  <Menu.Item key=\"customizesmgt\">\n                    <Link to=\"/work/review/customizesmgt\">\n                      <Icon type=\"build\" />\n                      <span className=\"nav-text\">业务科室</span>\n                    </Link>\n                  </Menu.Item>\n                  <Menu.Item key=\"labelsmgt\">\n                    <Link to=\"/work/review/labelsmgt\">\n                      <Icon type=\"build\" />\n                      <span className=\"nav-text\">标签管理</span>\n                    </Link>\n                  </Menu.Item>\n                </SubMenu>\n              ) : null\n            }\n          </Menu>\n        </Sider>\n        {this.props.children}\n      </Layout>\n    )\n  }\n}\n"],"sourceRoot":""}