(window.webpackJsonp=window.webpackJsonp||[]).push([[55],{962:function(e,r,t){},991:function(e,r,t){"use strict";t.r(r),t.d(r,"default",function(){return G});t(237);var a,s=t(157),o=(t(155),t(94)),n=(t(233),t(13)),c=(t(461),t(462)),p=(t(120),t(27)),u=(t(459),t(460)),i=t(2),l=t.n(i),m=(t(58),t(12)),d=t(57),y=t(42),g=t(43),f=t(45),h=t(44),v=t(46),w=t(0),E=t.n(w),b=t(699),q=t.n(b),P=t(51),k=(t(962),t(3)),G=Object(P.c)(function(e){return{processGroup:e.Review.processGroup}},function(e){return{queryProcessGroup:function(r){e({type:"".concat("Review","/queryProcessGroup"),payload:r})},queryProcesses:function(){e({type:"".concat("Review","/queryProcesses")})}}})(a=function(e){function r(){var e,t;Object(y.a)(this,r);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(t=Object(f.a)(this,(e=Object(h.a)(r)).call.apply(e,[this].concat(s)))).sortedProcessWrapperEl=E.a.createRef(),t.state={loading:!1,queryLoading:!1},t.dragulaDecorator=function(e){e&&(q()([e]),t.sortedProcessWrapperEl.current=e)},t.saveGroupSort=function(){t.setState({loading:!0});for(var e={},r=t.sortedProcessWrapperEl.current.getElementsByClassName("group-item"),a=0;a<r.length;a++)e[r[a].dataset.type]=a;Object(d.a)(l.a.mark(function r(){var a;return l.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(k.a)("/api/c_pst_sort_process_template_type",{method:"POST",body:{sort_json:e}});case 2:a=r.sent,t.setState({loading:!1}),"success"===a.status?(m.a.success("\u4fdd\u5b58\u6210\u529f"),t.props.history.push("/work/review/processmgt"),t.props.queryProcesses(),t.props.queryProcessGroup()):m.a.error("\u670d\u52a1\u5668\u9519\u8bef\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5");case 5:case"end":return r.stop()}},r)}))()},t}return Object(v.a)(r,e),Object(g.a)(r,[{key:"componentDidMount",value:function(){var e=this;this.props.processGroup||(this.setState({queryLoading:!0}),this.props.queryProcessGroup(function(){e.setState({queryLoading:!1})}))}},{key:"render",value:function(){var e=this,r=this.props.processGroup,t=this.state,a=t.loading,i=t.queryLoading;return E.a.createElement(s.a,{className:"review-group-sort"},E.a.createElement(c.a,{className:"group-sort-header"},E.a.createElement(u.a,{span:4},E.a.createElement("span",{className:"group-sort-title"},"\u8bc4\u5ba1\u6d41\u7a0b\u5206\u7ec4\u6392\u5e8f")),E.a.createElement(u.a,{span:20,className:"text-right"},E.a.createElement(p.a,{onClick:function(){return e.props.history.replace("/work/review/processmgt")}},"\u53d6\u6d88"),E.a.createElement(p.a,{loading:a,type:"primary",style:{marginLeft:"30px"},onClick:this.saveGroupSort},"\u4fdd\u5b58\u6392\u5e8f"))),E.a.createElement(o.a,{wrapperClassName:"spin-scroll-wrapper",spinning:i},E.a.createElement("div",{ref:this.dragulaDecorator,className:"group-sort-list"},r&&r.map(function(e,r){var t=e.id,a=e.name,s=e.count;return E.a.createElement(c.a,{className:"group-item",key:r,"data-type":t},E.a.createElement(n.a,{type:"ordered-list",style:{padding:"0 10px"}}),E.a.createElement("span",null,a),E.a.createElement("span",{style:{color:"#888"}},"\uff08",s,"\uff09"))}))))}}]),r}(E.a.Component))||a}}]);
//# sourceMappingURL=55.0732ef18.chunk.js.map