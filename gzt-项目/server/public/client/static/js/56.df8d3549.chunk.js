(window.webpackJsonp=window.webpackJsonp||[]).push([[56],{960:function(e,t,a){},989:function(e,t,a){"use strict";a.r(t),a.d(t,"default",function(){return j});a(237);var r,n=a(157),s=(a(155),a(94)),o=(a(233),a(13)),p=(a(461),a(462)),c=(a(120),a(27)),u=(a(459),a(460)),i=a(2),l=a.n(i),m=(a(58),a(12)),d=a(57),y=a(42),g=a(43),f=a(45),h=a(44),v=a(46),w=a(0),E=a.n(w),b=a(699),q=a.n(b),k=a(51),G=(a(960),a(3)),j=Object(k.c)(function(e){return{templateGroup:e.Review.templateGroup}},function(e){return{queryTemplateGroup:function(t){e({type:"".concat("Review","/queryTemplateGroup"),payload:t})},queryTemplates:function(){e({type:"".concat("Review","/queryTemplates")})}}})(r=function(e){function t(){var e,a;Object(y.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(n)))).sortedProcessWrapperEl=E.a.createRef(),a.state={loading:!1,queryLoading:!1},a.dragulaDecorator=function(e){e&&(q()([e]),a.sortedProcessWrapperEl.current=e)},a.saveGroupSort=function(){a.setState({loading:!0});for(var e={},t=a.sortedProcessWrapperEl.current.getElementsByClassName("group-item"),r=0;r<t.length;r++)e[t[r].dataset.type]=r;Object(d.a)(l.a.mark(function t(){var r;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(G.a)("/api/c_pst_sort_pst_template_type",{method:"POST",body:{sort_json:e}});case 2:r=t.sent,a.setState({loading:!1}),"success"===r.status?(m.a.success("\u4fdd\u5b58\u6210\u529f"),a.props.history.push("/work/review/templatemgt"),a.props.queryTemplates(),a.props.queryTemplateGroup()):m.a.error("\u670d\u52a1\u5668\u9519\u8bef\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5");case 5:case"end":return t.stop()}},t)}))()},a}return Object(v.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.templateGroup||(this.setState({queryLoading:!0}),this.props.queryTemplateGroup(function(){e.setState({queryLoading:!1})}))}},{key:"render",value:function(){var e=this,t=this.props.templateGroup,a=this.state,r=a.loading,i=a.queryLoading;return E.a.createElement(n.a,{className:"review-group-sort"},E.a.createElement(p.a,{className:"group-sort-header"},E.a.createElement(u.a,{span:4},E.a.createElement("span",{className:"group-sort-title"},"\u8bc4\u5ba1\u6d41\u7a0b\u5206\u7ec4\u6392\u5e8f")),E.a.createElement(u.a,{span:20,className:"text-right"},E.a.createElement(c.a,{onClick:function(){return e.props.history.replace("/work/review/templatemgt")}},"\u53d6\u6d88"),E.a.createElement(c.a,{loading:r,type:"primary",style:{marginLeft:"30px"},onClick:this.saveGroupSort},"\u4fdd\u5b58\u6392\u5e8f"))),E.a.createElement(s.a,{wrapperClassName:"spin-scroll-wrapper",spinning:i},E.a.createElement("div",{ref:this.dragulaDecorator,className:"group-sort-list"},t&&t.map(function(e,t){var a=e.id,r=e.name,n=e.count;return E.a.createElement(p.a,{className:"group-item",key:t,"data-type":a},E.a.createElement(o.a,{type:"ordered-list",style:{padding:"0 10px"}}),E.a.createElement("span",null,r),E.a.createElement("span",{style:{color:"#888"}},"\uff08",n,"\uff09"))}))))}}]),t}(E.a.Component))||r}}]);
//# sourceMappingURL=56.df8d3549.chunk.js.map