{"version":3,"sources":["pages/companyRegister/index.tsx"],"names":["Content","CompanyRegister","connect","undefined","dispatch","resetWorkbench","type","concat","queryCompanys","queryUserPermission","handleSubmit","e","preventDefault","_this","props","form","validateFieldsAndScroll","_ref","Object","_Users_litong_laravel_gzt_client_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_9__","_Users_litong_laravel_gzt_client_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_6___default","a","mark","_callee","err","values","result","wrap","_context","prev","next","request","method","body","sent","status","antd_es_message__WEBPACK_IMPORTED_MODULE_8__","success","message","history","push","error","stop","_x","_x2","apply","this","arguments","getFieldDecorator","react__WEBPACK_IMPORTED_MODULE_17__","antd_es_layout__WEBPACK_IMPORTED_MODULE_16__","style","height","margin","width","antd_es_form__WEBPACK_IMPORTED_MODULE_3__","onSubmit","Item","rules","required","antd_es_input__WEBPACK_IMPORTED_MODULE_5__","placeholder","antd_es_button__WEBPACK_IMPORTED_MODULE_1__","htmlType","block","React","__webpack_exports__","create"],"mappings":"oRAOQA,cAgCFC,EADLC,iBAAQC,EApBkB,SAACC,GAC1B,MAAO,CACLC,eAAgB,WACdD,EAAS,CACPE,KAAI,GAAAC,OAPM,YAON,sBAGRC,cAAe,WACbJ,EAAS,CACPE,KAAI,GAAAC,OAZM,YAYN,qBAGRE,oBAAqB,WACnBL,EAAS,CACPE,KAAI,GAAAC,OAhBK,WAgBL,2OASVG,aAAe,SAACC,GACdA,EAAEC,iBAEFC,EAAKC,MAAMC,KAAKC,wBAAhB,eAAAC,EAAAC,OAAAC,EAAA,EAAAD,CAAAE,EAAAC,EAAAC,KAAwC,SAAAC,EAAOC,EAAKC,GAAZ,IAAAC,EAAA,OAAAN,EAAAC,EAAAM,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,UACjCN,EADiC,CAAAI,EAAAE,KAAA,eAAAF,EAAAE,KAAA,EAEfC,YAAQ,gBAAiB,CAC5CC,OAAQ,OACRC,KAAMR,IAJ4B,OAMd,aAJhBC,EAF8BE,EAAAM,MAMzBC,QACTC,EAAA,EAAQC,QAAQX,EAAOY,SACvBzB,EAAKC,MAAMN,gBACXK,EAAKC,MAAML,sBACXI,EAAKC,MAAMT,iBACXQ,EAAKC,MAAMyB,QAAQC,KAAK,UAExBJ,EAAA,EAAQK,MAAMf,EAAOY,SAba,wBAAAV,EAAAc,SAAAnB,MAAxC,gBAAAoB,EAAAC,GAAA,OAAA3B,EAAA4B,MAAAC,KAAAC,YAAA,6EAmBO,IAECC,EAAsBF,KAAKhC,MAAMC,KAAjCiC,kBAER,OACEC,EAAA,cAAAC,EAAA,GAAQC,MAAO,CAAEC,OAAQ,uBACvBH,EAAA,cAACjD,EAAD,CAASmD,MAAO,CAAEE,OAAQ,YAAaC,MAAO,UAC5CL,EAAA,cAAAM,EAAA,GAAMC,SAAUV,KAAKpC,cACnBuC,EAAA,cAAAM,EAAA,EAAME,KAAN,KAEIT,EAAkB,OAAQ,CACxBU,MAAO,CAAC,CACNC,UAAU,EAAMrB,QAAS,gDAF7BU,CAKEC,EAAA,cAAAW,EAAA,GAAOC,YAAY,iDAIzBZ,EAAA,cAAAM,EAAA,EAAME,KAAN,KACER,EAAA,cAAAa,EAAA,GAAQxD,KAAK,UAAUyD,SAAS,SAASC,OAAK,GAA9C,2BA5CgBC,iBAoDfC,EAAA,QAAAX,EAAA,EAAKY,QAAL,CAAoClE","file":"static/js/58.1541cc6e.chunk.js","sourcesContent":["import * as React from 'react';\nimport { Layout, Form, Input, Button, message } from 'antd';\nimport { FormComponentProps } from 'antd/lib/form';\nimport request from '../../utils/request';\nimport { History } from 'history';\nimport { connect } from 'dva';\n\nconst { Content } = Layout;\n\ninterface CompanyRegisterProps extends FormComponentProps {\n  history: History;\n  queryCompanys: Function;\n  queryUserPermission: Function;\n  resetWorkbench: Function;\n}\nconst NAMESPACE = 'Workbench'; // dva model 命名空间\nconst USERINFO = 'UserInfo'; // dva model 命名空间\n\nconst mapDispatchToProps = (dispatch: any) => {\n  return {\n    resetWorkbench: () => {\n      dispatch({\n        type: `${NAMESPACE}/resetWorkbench`,\n      })\n    },\n    queryCompanys: () => {\n      dispatch({\n        type: `${NAMESPACE}/queryCompanys`\n      });\n    },\n    queryUserPermission: () => {\n      dispatch({\n        type: `${USERINFO}/queryUserPermission`\n      });\n    }\n  }\n}\n\n@connect(undefined, mapDispatchToProps)\nclass CompanyRegister extends React.Component<CompanyRegisterProps, any>{\n\n  handleSubmit = (e: React.FormEvent<any>) => {\n    e.preventDefault();\n\n    this.props.form.validateFieldsAndScroll(async (err, values) => {\n      if (!err) {\n        const result = await request('/api/c_create', {\n          method: 'POST',\n          body: values\n        })\n        if (result.status === 'success') {\n          message.success(result.message);\n          this.props.queryCompanys();\n          this.props.queryUserPermission();\n          this.props.resetWorkbench();\n          this.props.history.push('/work');\n        } else {\n          message.error(result.message);\n        }\n      }\n    })\n  }\n\n  render() {\n\n    const { getFieldDecorator } = this.props.form;\n\n    return (\n      <Layout style={{ height: 'calc(100vh - 61px)' }}>\n        <Content style={{ margin: '30px auto', width: '540px' }}>\n          <Form onSubmit={this.handleSubmit}>\n            <Form.Item>\n              {\n                getFieldDecorator('name', {\n                  rules: [{\n                    required: true, message: '请输入企业名称'\n                  }]\n                })(\n                  <Input placeholder=\"请输入企业名称\" />\n                )\n              }\n            </Form.Item>\n            <Form.Item>\n              <Button type=\"primary\" htmlType=\"submit\" block>创建</Button>\n            </Form.Item>\n          </Form>\n        </Content>\n      </Layout>\n    );\n  }\n}\nexport default Form.create<CompanyRegisterProps>()(CompanyRegister)"],"sourceRoot":""}